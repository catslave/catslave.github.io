---
layout: post
title: SICP
category: Compiler
description: 游戏脚本高级编程
---

# XtremeScript

# 汇编器

《第4篇 设计和实现一种底层语言》介绍汇编器的实现，实现了一个完整的汇编器。

## 汇编器是如何运作的

汇编器的功能：
（1）遍历源码处理指示符，包括行标签索引和函数入口点的处理。
（2）再次遍历源码把每条指令汇编成相等的机器码，同时还要解析跳转行标签和函数调用。
（3）使用已构造好的XVM可以识别的格式把已经完成的数据输出到一个二进制文件中。

汇编过程：
（1）根据指令查找表把每个指令助记符转为相应的操作码。
（2）根据所有变量和数组引用所在的作用域，把它们转变成相关的堆栈索引。
（3）注意指令流中的行标签索引，把指令后面的引用转换成索引。
（4）丢弃所有无关内容比如空白符、逗号等。把所有东西转为ASCII码相对应的二进制格式。
（5）采用XML格式，将内容输出到二进制文件，作为可执行文件，

# 虚拟机

《第5篇 设计和实现虚拟机》介绍虚拟机的实现，实现了一个完整的虚拟机。

# 编译器

《第6篇 编译高级代码》介绍编译器的实现，实现了一个完整的编译器。
