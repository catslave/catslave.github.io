---
layout: post
title: Java JDK 7 更新内容
category: Java
description: JDK 7 新特性 Fork/Join（JSR 166y）
---

# JDK 7

## 泛型类型推断

**什么是类型推断**

JDK 7 以前的泛型使用：

{% highlight java %}

Map<String, String> myMap = new HashMap<String, String>();

{% endhighlight %}

在变量声明和赋值时，两侧都要加上泛型类型。

JDK 7 以后：

{% highlight java %}

Map<String, String> myMap = new HashMap<>();

{% endhighlight %}

编译器会根据变量声明时的泛型类型自动推断出实例化时的泛型类型。

## Switch语句支持String

之前为什么不支持？Switch语句实现原理？支持String的实现原理？

**Switch语句实现原理**

**支持String的实现原理**

编译后还是使用switch(int)结构来实现，将String的比较转换成hashCode和equals方法的比较。利用String的hashCode方法，返回的int值进行判断。
> 注意：String的hashCode方法可能有哈希冲突，所以每个case条件还加了equals判断，避免哈希冲突。

## invokedynamic指令

通过invokedynamic指令生成目标对象