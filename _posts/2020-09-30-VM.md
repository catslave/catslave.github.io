---
layout: post
title: 虚拟机
category: VM
description: 虚拟机理论
---

# 虚拟机分类

计算机体系结构
![](/assets/images/vm/SystemArchitecture.png)

虚拟机分类
![](/assets/images/vm/VMClassify.png)

## 进程虚拟机

为用户应用程序提供虚拟的ABI环境。

进程虚拟机的实现
![](/assets/images/vm/VMImplemention.png)

## 系统虚拟机

# 仿真技术

指令集仿真是许多虚拟机实现的一种重要支撑技术。由于仿真过程通常会损失一些性能，因此性能优化总是虚拟机实现的一个问题。高级语言虚拟机，二进制类采用了一个基于栈、字节码指令集。一个完整的ISA由许多部分组成，包括寄存器集合存储器结构、指令、陷阱和中断结构。指令集仿真技术的实现方式，其中一个是直接解释，另一个是二进制翻译。

## 解释

## 二进制翻译

# 高级语言虚拟机

Java指令集结构是基于栈的。
Java虚拟机的实现
![](/assets/images/vm/JavaVMImplemention.png)

类加载器，一个Java虚拟机必须包含一个基本的类加载器，其操作被定义为JVM规范的一部分。另外，用户也可以定义类加载器作为类加载器子系统的一部分。在定位一个二进制类之后，加载器解析这个二进制类，并且将它翻译成可以被执行引擎仿真的内部数据结构。
垃圾收集器，实质上是每个JVM实现的一部分，尽管没有严格要求它作为JVM规范的一部分。
    （1）标记清除收集器：标记，它从根引用开始跟踪所有可达对象，在达到每个对象时标记这个对象。清除，检查所有对象，凡是未被标记的对象被确定为垃圾。
    （2）压缩收集器：将所有活动的对象移动到堆内存区域的顶部（或底部），剩下的就是一个连续的自由空间区域。
    （3）复制收集器：